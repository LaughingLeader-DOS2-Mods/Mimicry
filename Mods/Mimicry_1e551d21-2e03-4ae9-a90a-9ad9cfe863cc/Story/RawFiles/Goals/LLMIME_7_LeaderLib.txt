Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
IF
StoryEvent(_, "LeaderLib_Initialized")
AND
NOT DB_LLMIME_RegisteredLeaderLibSettings(_)
THEN
LLMIME_LeaderLib_RegisterSettings();
DB_LLMIME_RegisteredLeaderLibSettings(1);

PROC
LLMIME_LeaderLib_RegisterSettings()
THEN
LeaderLib_Register_ModMenu("LaughingLeader_Mimicry", "[Mimicry] Mime Menu", "LLMIME_SettingsMenu", "Mimicry", "LaughingLeader");

PROC
LLMIME_LeaderLib_RegisterSettings()
THEN
LLLIB_Trader_Register_Position("LLLIB_LeaderTrader", "TestLevel_LL_Mimicry", 12.0, 0.0, 8.0);
LLLIB_Trader_Register_StartingGold("LLLIB_LeaderTrader", "TestLevel_LL_Mimicry", 9999);
//LLLIB_Trader_Register_PositionObject("LLLIB_LeaderTrader", "LLNWIZ_DebugLevel", ITEMGUID_WPN_Dwarves_Shield_A_000_ef289002-e5b3-4a3e-8ad5-1d68ac847f67);
LLLIB_Treasure_Register_TreasureToTrader("LLMIME.LeaderTrader.MusicBox", "LLLIB_LeaderTrader");
LLLIB_Treasure_AddTreasureItemTemplate("LLMIME.LeaderTrader.MusicBox", "UNIQUE_LLMIME_MusicBox_fd03b00c-5366-40e2-a8af-1d9f6a904ecb", 1);
//LLLIB_Treasure_Configure_AddMaxAmount("LLMIME.LeaderTrader.MusicBox", "UNIQUE_LLMIME_MusicBox_fd03b00c-5366-40e2-a8af-1d9f6a904ecb", 1);
LLLIB_Treasure_Configure_GenerationType("LLMIME.LeaderTrader.MusicBox", "UNIQUE_LLMIME_MusicBox_fd03b00c-5366-40e2-a8af-1d9f6a904ecb", "DIALOG_STARTED");
LLLIB_Treasure_Configure_GenerateOnce("LLMIME.LeaderTrader.MusicBox", "UNIQUE_LLMIME_MusicBox_fd03b00c-5366-40e2-a8af-1d9f6a904ecb", "");

LLLIB_Treasure_Register_TreasureToTrader("LLMIME.LeaderTrader.MimicSkillbooks", "LLLIB_LeaderTrader");
LLLIB_Treasure_Configure_GenerateTreasureEndlessly("LLMIME.LeaderTrader.MimicSkillbooks");
LLLIB_Treasure_AddTreasureItemTemplate("LLMIME.LeaderTrader.MimicSkillbooks", "BOOK_Skill_LLMIME_Mimicking_Source_c2e7fcd2-657d-4e6d-8ca2-dbacce23d9fe", 1, "LLMIME_Requirements_EliteMime");
LLLIB_Treasure_Configure_AddMaxAmount("LLMIME.LeaderTrader.MimicSkillbooks", "BOOK_Skill_LLMIME_Mimicking_Source_c2e7fcd2-657d-4e6d-8ca2-dbacce23d9fe", 1);
//LLLIB_Treasure_Register_TreasureTable("LLMIME.LeaderTrader.MimicSkillbooks", "ST_LLMIME_SkillbookMime", "LLMIME.Requirements.EliteMime", 1);
//LLLIB_Treasure_Configure_TreasureTable_Limit("LLMIME.LeaderTrader.MimicSkillbooks", "ST_LLMIME_SkillbookMime", 6);
LLLIB_Treasure_Configure_GenerationType("LLMIME.LeaderTrader.MimicSkillbooks", "BOOK_Skill_LLMIME_Mimicking_Source_c2e7fcd2-657d-4e6d-8ca2-dbacce23d9fe", "PARTY_LEVELED_UP");
LLLIB_Requirements_AddPartyLevelRequirement("LLMIME_Requirements_EliteMime", 10, -1, 0);


IF
ItemDestroyed(_Item)
AND
GetTemplate(_Item, "UNIQUE_LLMIME_MusicBox_fd03b00c-5366-40e2-a8af-1d9f6a904ecb")
AND
DB_LLLIB_Treasure_ItemDoneGenerating(_Object, "LLMIME.LeaderTrader.MusicBox", "UNIQUE_LLMIME_MusicBox_fd03b00c-5366-40e2-a8af-1d9f6a904ecb")
THEN
NOT DB_LLLIB_Treasure_ItemDoneGenerating(_Object, "LLMIME.LeaderTrader.MusicBox", "UNIQUE_LLMIME_MusicBox_fd03b00c-5366-40e2-a8af-1d9f6a904ecb");
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "LaughingLeader_Mimicry"
